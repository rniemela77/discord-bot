import{u as T,m as g,r as o,n as w,q as x,o as r,d as D,w as S,a,e as i,v as d,c as k,s as N,x as U,F as V,f as B,i as q,y as C,t as F,k as M}from"./index.b4d7205f.js";import{F as A}from"./FormTemplate.70926610.js";const L=["onSubmit"],W=a("label",{for:"taskName"},"Task Name",-1),$=["disabled"],E=a("label",{for:"taskDescription"},"Task Description",-1),I=["disabled"],j=a("label",null,"I will report on the task status at:",-1),z=["disabled"],G=["disabled"],H=a("h3",null,"Set task watchers",-1),J=["disabled","value","id"],K=["for"],O=["disabled"],P={name:"CreateTask",setup(h){const n=T(),_=g(),u=o(""),c=o(""),p=o(""),m=o(""),v=o([]),s=o("initial"),b=w(()=>n.allUsers.filter(l=>l!==n.username)),f=async()=>{s.value="sending";const l={name:u.value.trim(),description:c.value.trim(),date:p.value,time:m.value,createdBy:n.username,watchedBy:v.value};try{await _.addTask(l).then(()=>{q.push("/")}).catch(e=>{console.error(e)})}catch(e){e.value=e.message,s.value="initial";return}};return x(async()=>{await n.getAllUsers().catch(l=>{console.error(l)})}),(l,e)=>(r(),D(A,{status:s.value},{default:S(()=>[a("form",{onSubmit:B(f,["prevent"])},[W,i(a("input",{type:"text",id:"taskName","onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),placeholder:"Task Name",disabled:s.value==="sending",required:""},null,8,$),[[d,u.value]]),E,i(a("input",{type:"text",id:"taskDescription","onUpdate:modelValue":e[1]||(e[1]=t=>c.value=t),placeholder:"Task Description",disabled:s.value==="sending",required:""},null,8,I),[[d,c.value]]),j,i(a("input",{type:"date",id:"taskDate","onUpdate:modelValue":e[2]||(e[2]=t=>p.value=t),disabled:s.value==="sending",required:""},null,8,z),[[d,p.value]]),i(a("input",{type:"time",id:"taskTime","onUpdate:modelValue":e[3]||(e[3]=t=>m.value=t),disabled:s.value==="sending",required:""},null,8,G),[[d,m.value]]),H,(r(!0),k(V,null,N(U(b),t=>(r(),k("div",{key:t},[i(a("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=y=>v.value=y),disabled:s.value==="sending",value:t,id:t},null,8,J),[[C,v.value]]),a("label",{for:t},F(t),9,K)]))),128)),a("button",{disabled:s.value==="sending",type:"submit"}," Add Task ",8,O)],40,L)]),_:1},8,["status"]))}},Q=a("h2",null,"Create Task",-1),Y={name:"NewTaskView",setup(h){return(n,_)=>(r(),k("div",null,[Q,M(P)]))}};export{Y as default};
